---
import { getCollection, getEntryBySlug } from "astro:content";
import IconPill from "~/components/global/IconPill.astro";

// const tech = frontmatter;

const skills = await getCollection("skills");
// const techs = await getCollection("tech");

const {
  data: { tech },
} = await getEntryBySlug("categories", "tech");

const techWithIcons = await Promise.all(
  await tech.map(async (item) => {
    return {
      ...item,

      icon: (
        await import(/* @vite-ignore */ `../../assets/icons/${item.icon}.svg`)
      ).default,
    };
  })
);
---

<section class="section has-icon" data-icon="skills">
  {/* Skills */}
  <h2 class="section-title">What I Do</h2>
  <p class="body">
    With knowledge spanning the full stack, my goal is to constantly learn as I
    bring modern web experiences to life.
  </p>

  <h3 class="title">Skills</h3>
  <ol class="tech">
    {
      techWithIcons.map((item) => (
        <li>
          <IconPill
            label={item.name}
            icon={item.icon}
            tooltip={item.tooltip}
            colour={item.colour}
          />
        </li>
      ))
    }
  </ol>
</section>

<style lang="scss">
  section {
    // display: grid;
    grid-template-columns: 2fr 3fr;
    > .body {
      margin-bottom: 2rem;
    }
  }

  .title {
    font-size: 0.75rem;
    font-weight: 500;
    margin-bottom: $spacing-sm;
    // font-family: monospace;

    // &::before,
    // &::after {
    //   color: #ebebeb;
    // }

    // &::before {
    //   content: "<";
    //   margin-right: 0.25em;
    // }
    // &::after {
    //   content: "/>";
    //   margin-left: 0.25em;
    // }
  }

  // .skills {
  //   display: grid;
  //   grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  //   gap: 1rem;
  // }

  .tech {
    display: flex;
    flex-wrap: wrap;
    // grid-template-columns: repeat(5, 1fr);
    // grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    gap: 0.4rem;

    @include breakpoint(sm) {
      gap: 0.5rem;
    }

    @include breakpoint(md) {
      gap: 0.6rem;
    }

    @include breakpoint(lg) {
      gap: 0.7rem;
    }

    li {
      display: flex;
      gap: 1rem;
    }

    .logo {
      height: 1em;
    }

    h3 {
      font-size: 0.7rem;
      font-weight: normal;
    }
  }
</style>
